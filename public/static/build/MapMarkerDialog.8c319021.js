(window.webpackJsonp=window.webpackJsonp||[]).push([["MapMarkerDialog"],{"2B1R":function(t,e,o){"use strict";var n=o("I+eb"),a=o("tycR").map,i=o("0Dky"),r=o("Hd5f")("map"),s=r&&!i((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));n({target:"Array",proto:!0,forced:!r||!s},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},Hd5f:function(t,e,o){var n=o("0Dky"),a=o("tiKp"),i=o("YK6W"),r=a("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},YK6W:function(t,e,o){var n,a,i=o("2oRo"),r=o("s5pE"),s=i.process,c=s&&s.versions,u=c&&c.v8;u?a=(n=u.split("."))[0]+n[1]:r&&(!(n=r.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=r.match(/Chrome\/(\d+)/))&&(a=n[1]),t.exports=a&&+a},eCbr:function(t,e,o){"use strict";o.r(e);o("oVuX"),o("2B1R"),o("DQNa"),o("wLYn"),o("sMBO"),o("eoL8"),o("07d7"),o("rB9j"),o("JfAA"),o("EnZy");var n=o("4ZJM"),a=o.n(n);function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a.a.accessToken="pk.eyJ1IjoiY2FydG1hbnVzZXIiLCJhIjoiY2p5aHVyNHB2MDNudzNnbnJiaGVtcWJ2OCJ9.2UPDKnSZRNwNR1ITlZQEAA",this.map=new a.a.Map({container:e,style:"mapbox://styles/mapbox/outdoors-v11/?optimize=true",center:[-79.756514,22.028145],zoom:5,minZoom:2,maxZoom:18,pitch:0}),this.canvas=this.map.getCanvasContainer(),this.coordinatesAndZoom=document.querySelector('tbody input[type="text"]'),this.geojson={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-79.756514,22.028145]}}]},this.mouseMoveHandler=function(){},this.touchMoveHandler=function(){},this.events()}var e,o,n;return e=t,(o=[{key:"events",value:function(){this.map.on("load",this.prepareAndMovePoint.bind(this))}},{key:"setFiredOnLoad",value:function(t){this.map.on("load",t)}},{key:"onMove",value:function(t){var e=t.lngLat;this.canvas.style.setProperty("cursor","grabbing","important"),this.geojson.features[0].geometry.coordinates=[e.lng,e.lat],this.map.getSource("point").setData(this.geojson)}},{key:"onUp",value:function(t){var e=t.lngLat;this.coordinatesAndZoom.value=e.lng+","+e.lat+";"+this.map.getZoom(),this.canvas.style.setProperty("cursor","default","important"),this.map.off("mousemove",this.mouseMoveHandler),this.map.off("touchmove",this.touchMoveHandler)}},{key:"prepareAndMovePoint",value:function(){var t=this;this.map.addSource("point",{type:"geojson",data:this.geojson}),this.map.addLayer({id:"point",type:"circle",source:"point",paint:{"circle-radius":10,"circle-color":"#3887be"}}),this.map.on("mouseenter","point",(function(){t.map.setPaintProperty("point","circle-color","#0fb5d0"),t.canvas.style.setProperty("cursor","move","important")})),this.map.on("mouseleave","point",(function(){t.map.setPaintProperty("point","circle-color","#3887be"),t.canvas.style.setProperty("cursor","","important")})),this.map.on("mousedown","point",(function(e){e.preventDefault(),t.mouseMoveHandler=t.onMove.bind(t),t.canvas.style.setProperty("cursor","grab","important"),t.map.on("mousemove",t.mouseMoveHandler),t.map.once("mouseup",t.onUp.bind(t))})),this.map.on("touchstart","point",(function(e){1===e.points.length&&(e.preventDefault(),t.touchMoveHandler=t.onMove.bind(t),t.map.on("touchmove",t.touchMoveHandler),t.map.once("touchend",t.onUp.bind(t)))}))}},{key:"setCenterAndZoomMap",value:function(t,e){this.map.setCenter(t).setZoom(e)}},{key:"setGeoJson",value:function(t){this.geojson.features[0].geometry.coordinates=t,this.map.getSource("point").setData(this.geojson)}}])&&i(e.prototype,o),n&&i(e,n),t}(),s=null;CKEDITOR.dialog.add("MapMarkerDialog",(function(t){return{title:"MapMarker Properties",minHeight:20,contents:[{id:"tab-basic",label:"Basic Settings",elements:[{type:"text",id:"center_zoom",label:"Point Coordinates & Zoom",validate:CKEDITOR.dialog.validate.notEmpty("Coordinates and Zoom cannot be empty."),setup:function(t){console.log(t);var e=document.querySelector(".cke_dialog_contents tbody"),o=JSON.parse(t.getAttribute("data-map"));if(o.center.isArray?this.setValue(o.center.join(", ")+";"+o.zoom):this.setValue(o.center+";"+o.zoom),0===e.querySelectorAll("#selectMap").length){var n=document.createElement("div");n.setAttribute("id","selectMap"),n.setAttribute("style","height: 50vh; width:100%"),n.setAttribute("id","selectMap"),e.insertBefore(n,e.firstChild),s=new r("selectMap")}s.setFiredOnLoad((function(){s.setGeoJson(o.center),s.setCenterAndZoomMap(o.center,o.zoom)}))}},{type:"text",id:"name",label:"Name of this point (optional)",setup:function(t){var e=JSON.parse(t.getAttribute("data-map"));this.setValue(e.name)}}]}],onOk:function(){var e=t.document.createElement("span"),o='"name":';""===this.getValueOf("tab-basic","name")?o+='""':o+='"'+this.getValueOf("tab-basic","name")+'"';var n=this.getValueOf("tab-basic","center_zoom").split(";"),a=['"center":['+n[0]+"]",'"zoom":'+n[1],o];a="{"+a.toString()+"}",e.setAttribute("data-map",a),e.setAttribute("class","MapMarker"),e.setText("[MM]"),t.insertElement(e)},onShow:function(){this.move(this.getPosition().x,0);var e=t.getSelection().getStartElement();if((e=t.restoreRealElement(e))&&"span"==e.getName())this.insertMode=!1;else{e=t.document.createElement("span");var o=['"center":[-79.756514, 22.028145]','"zoom":5'];o="{"+o.toString()+"}",e.setAttribute("data-map",o),this.insertMode=!0}this.element=e,this.setupContent(this.element.$)}}}))},oVuX:function(t,e,o){"use strict";var n=o("I+eb"),a=o("RK3t"),i=o("/GqU"),r=o("swFL"),s=[].join,c=a!=Object,u=r("join",",");n({target:"Array",proto:!0,forced:c||u},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},sMBO:function(t,e,o){var n=o("g6v/"),a=o("m/L8").f,i=Function.prototype,r=i.toString,s=/^\s*function ([^ (]*)/;!n||"name"in i||a(i,"name",{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})},swFL:function(t,e,o){"use strict";var n=o("0Dky");t.exports=function(t,e){var o=[][t];return!o||!n((function(){o.call(null,e||function(){throw 1},1)}))}}},[["eCbr","runtime",0,1]]]);